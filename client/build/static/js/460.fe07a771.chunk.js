"use strict";(self.webpackChunkapplication_init_client=self.webpackChunkapplication_init_client||[]).push([[460],{39:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(8587),r=a(8168),s=a(5043),i=a(8387),o=a(8610),l=a(7266),d=a(6803),c=a(1009),u=a(1573),p=a(8206),h=a(4535),A=a(2532),g=a(2372);function m(e){return(0,g.Ay)("MuiTableCell",e)}const x=(0,A.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);var v=a(579);const y=["align","className","component","padding","scope","size","sortDirection","variant"],b=(0,h.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["size".concat((0,d.A)(a.size))],"normal"!==a.padding&&t["padding".concat((0,d.A)(a.padding))],"inherit"!==a.align&&t["align".concat((0,d.A)(a.align))],a.stickyHeader&&t.stickyHeader]}})(e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?(0,l.a)((0,l.X4)(t.palette.divider,1),.88):(0,l.e$)((0,l.X4)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===a.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===a.variant&&{color:(t.vars||t).palette.text.primary},"footer"===a.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===a.size&&{padding:"6px 16px",["&.".concat(x.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===a.padding&&{width:48,padding:"0 0 0 4px"},"none"===a.padding&&{padding:0},"left"===a.align&&{textAlign:"left"},"center"===a.align&&{textAlign:"center"},"right"===a.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===a.align&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})}),f=s.forwardRef(function(e,t){const a=(0,p.b)({props:e,name:"MuiTableCell"}),{align:l="inherit",className:h,component:A,padding:g,scope:x,size:f,sortDirection:j,variant:w}=a,k=(0,n.A)(a,y),C=s.useContext(c.A),S=s.useContext(u.A),L=S&&"head"===S.variant;let T;T=A||(L?"th":"td");let z=x;"td"===T?z=void 0:!z&&L&&(z="col");const N=w||S&&S.variant,D=(0,r.A)({},a,{align:l,component:T,padding:g||(C&&C.padding?C.padding:"normal"),size:f||(C&&C.size?C.size:"medium"),sortDirection:j,stickyHeader:"head"===N&&C&&C.stickyHeader,variant:N}),H=(e=>{const{classes:t,variant:a,align:n,padding:r,size:s,stickyHeader:i}=e,l={root:["root",a,i&&"stickyHeader","inherit"!==n&&"align".concat((0,d.A)(n)),"normal"!==r&&"padding".concat((0,d.A)(r)),"size".concat((0,d.A)(s))]};return(0,o.A)(l,m,t)})(D);let M=null;return j&&(M="asc"===j?"ascending":"descending"),(0,v.jsx)(b,(0,r.A)({as:T,ref:t,className:(0,i.A)(H.root,h),"aria-sort":M,scope:z,ownerState:D},k))})},1009:(e,t,a)=>{a.d(t,{A:()=>n});const n=a(5043).createContext()},1079:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var n=a(7051),r=a(5043),s=a(6446),i=a(7254),o=a(5865),l=a(3336),d=a(5263),c=a(1906),u=a(1637),p=a(9650),h=a(1806),A=a(4882),g=a(8076),m=a(39),x=a(3460),v=a(7392),y=a(35),b=a(6600),f=a(5316),j=a(5795),w=a(9347),k=a(5032),C=a(141),S=a(3560),L=a(3768),T=a(4117),z=a(5016),N=a(6305);const D=async()=>{try{return(await N.Ay.get("/labtests")).data}catch(t){var e;throw(null===(e=t.response)||void 0===e?void 0:e.data)||{success:!1,message:"Network error"}}},H=async e=>{try{return(await N.Ay.post("/labtests",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{success:!1,message:"Network error"}}},M=async(e,t)=>{try{return(await N.Ay.put("/labtests/".concat(e),t)).data}catch(n){var a;throw(null===(a=n.response)||void 0===a?void 0:a.data)||{success:!1,message:"Network error"}}},R=async e=>{try{return(await N.Ay.delete("/labtests/".concat(e))).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{success:!1,message:"Network error"}}};var F=a(579);const G=()=>{const{t:e}=(0,T.Bd)(),{user:t}=(0,z.A)(),[a,N]=(0,r.useState)([]),[G,_]=(0,r.useState)(!0),[W,q]=(0,r.useState)(""),[I,E]=(0,r.useState)(""),[B,U]=(0,r.useState)(!1),[X,J]=(0,r.useState)(null),[V,$]=(0,r.useState)({name:""}),[K,O]=(0,r.useState)(!1),[P,Q]=(0,r.useState)(null);(0,r.useEffect)(()=>{if("admin"!==(null===t||void 0===t?void 0:t.role))return q("Access denied. Admin role required."),void _(!1);Y()},[t]);const Y=async()=>{try{_(!0);const e=await D();e.success?N(e.data):q(e.message||"Failed to fetch lab tests")}catch(e){q("Failed to fetch lab tests"),console.error("Fetch lab tests error:",e)}finally{_(!1)}},Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;J(e),$(e?{name:e.name}:{name:""}),U(!0)},ee=()=>{U(!1),J(null),$({name:""}),q("")};return"admin"!==(null===t||void 0===t?void 0:t.role)?(0,F.jsx)(s.A,{children:(0,F.jsx)(i.A,{severity:"error",children:"Access denied. Admin role required."})}):(0,F.jsxs)(s.A,{children:[(0,F.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,F.jsx)(k.A,{sx:{mr:2,color:"primary.main"}}),(0,F.jsx)(o.A,{variant:"h4",component:"h1",children:"Lab Test Management"})]}),W&&(0,F.jsx)(i.A,{severity:"error",sx:{mb:2},onClose:()=>q(""),children:W}),I&&(0,F.jsx)(i.A,{severity:"success",sx:{mb:2},onClose:()=>E(""),children:I}),(0,F.jsx)(l.A,{sx:{mb:3},children:(0,F.jsxs)(d.A,{children:[(0,F.jsxs)(o.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:["Lab Tests (",a.length,")"]}),(0,F.jsx)(c.A,{variant:"contained",startIcon:(0,F.jsx)(C.A,{}),onClick:()=>Z(),children:"Add Lab Test"})]})}),G?(0,F.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,F.jsx)(u.A,{})}):(0,F.jsx)(p.A,{component:l.A,children:(0,F.jsxs)(h.A,{children:[(0,F.jsx)(A.A,{children:(0,F.jsxs)(g.A,{children:[(0,F.jsx)(m.A,{children:"Name"}),(0,F.jsx)(m.A,{children:"Created Date"}),(0,F.jsx)(m.A,{children:"Last Updated"}),(0,F.jsx)(m.A,{align:"center",children:"Actions"})]})}),(0,F.jsx)(x.A,{children:0===a.length?(0,F.jsx)(g.A,{children:(0,F.jsx)(m.A,{colSpan:4,align:"center",sx:{py:4},children:(0,F.jsx)(o.A,{variant:"body2",color:"text.secondary",children:'No lab tests found. Click "Add Lab Test" to create one.'})})}):a.map(e=>(0,F.jsxs)(g.A,{children:[(0,F.jsx)(m.A,{children:(0,F.jsx)(o.A,{variant:"subtitle2",fontWeight:"medium",children:e.name})}),(0,F.jsx)(m.A,{children:new Date(e.createdAt).toLocaleDateString()}),(0,F.jsx)(m.A,{children:new Date(e.updatedAt).toLocaleDateString()}),(0,F.jsxs)(m.A,{align:"center",children:[(0,F.jsx)(v.A,{color:"primary",onClick:()=>Z(e),title:"Edit",children:(0,F.jsx)(S.A,{})}),(0,F.jsx)(v.A,{color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this lab test?"))try{const t=await R(e);t.success?(E("Lab test deleted successfully"),Y()):q(t.message||"Failed to delete lab test")}catch(t){q("Failed to delete lab test"),console.error("Delete lab test error:",t)}})(e._id),title:"Delete",children:(0,F.jsx)(L.A,{})})]})]},e._id))})]})}),(0,F.jsx)(y.A,{open:B,onClose:ee,maxWidth:"sm",fullWidth:!0,children:(0,F.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),V.name.trim())try{let e;O(!0),q(""),e=X?await M(X._id,V):await H(V),e.success?(E(X?"Lab test updated successfully":"Lab test created successfully"),ee(),Y()):q(e.message||"Failed to save lab test")}catch(t){q("Failed to save lab test"),console.error("Save lab test error:",t)}finally{O(!1)}else q("Lab test name is required")},children:[(0,F.jsx)(b.A,{children:X?"Edit Lab Test":"Add New Lab Test"}),(0,F.jsxs)(f.A,{children:[(0,F.jsx)(j.A,{autoFocus:!0,margin:"dense",name:"name",label:"Lab Test Name",type:"text",fullWidth:!0,variant:"outlined",value:V.name,onChange:e=>{const{name:t,value:a}=e.target;$(e=>(0,n.A)((0,n.A)({},e),{},{[t]:a}))},required:!0,error:!V.name.trim()&&""!==V.name,helperText:V.name.trim()||""===V.name?"":"Lab test name is required"}),W&&(0,F.jsx)(i.A,{severity:"error",sx:{mt:2},children:W})]}),(0,F.jsxs)(w.A,{children:[(0,F.jsx)(c.A,{onClick:ee,children:"Cancel"}),(0,F.jsx)(c.A,{type:"submit",variant:"contained",disabled:K||!V.name.trim(),children:K?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(u.A,{size:20,sx:{mr:1}}),"Saving..."]}):X?"Update":"Create"})]})]})})]})}},1573:(e,t,a)=>{a.d(t,{A:()=>n});const n=a(5043).createContext()},5032:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(9662),r=a(579);const s=(0,n.A)((0,r.jsx)("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6"}),"Science")},5263:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(8587),r=a(8168),s=a(5043),i=a(8387),o=a(8610),l=a(8206),d=a(4535),c=a(2532),u=a(2372);function p(e){return(0,u.Ay)("MuiToolbar",e)}(0,c.A)("MuiToolbar",["root","gutters","regular","dense"]);var h=a(579);const A=["className","component","disableGutters","variant"],g=(0,d.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableGutters&&t.gutters,t[a.variant]]}})(e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({position:"relative",display:"flex",alignItems:"center"},!a.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===a.variant&&{minHeight:48})},e=>{let{theme:t,ownerState:a}=e;return"regular"===a.variant&&t.mixins.toolbar}),m=s.forwardRef(function(e,t){const a=(0,l.b)({props:e,name:"MuiToolbar"}),{className:s,component:d="div",disableGutters:c=!1,variant:u="regular"}=a,m=(0,n.A)(a,A),x=(0,r.A)({},a,{component:d,disableGutters:c,variant:u}),v=(e=>{const{classes:t,disableGutters:a,variant:n}=e,r={root:["root",!a&&"gutters",n]};return(0,o.A)(r,p,t)})(x);return(0,h.jsx)(g,(0,r.A)({as:d,className:(0,i.A)(v.root,s),ref:t,ownerState:x},m))})}}]);
//# sourceMappingURL=460.fe07a771.chunk.js.map