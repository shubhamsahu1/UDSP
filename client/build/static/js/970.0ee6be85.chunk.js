"use strict";(self.webpackChunkapplication_init_client=self.webpackChunkapplication_init_client||[]).push([[970],{1007:(e,n,r)=>{r.d(n,{A:()=>o});var a=r(9662),t=r(579);const o=(0,a.A)((0,t.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock")},6970:(e,n,r)=>{r.r(n),r.d(n,{default:()=>he});var a=r(7051),t=r(5043),o=r(6446),s=r(5865),i=r(1906),l=r(9650),c=r(3336),u=r(1806),m=r(4882),d=r(8076),g=r(39),h=r(3460),A=r(3845),p=r(7739),x=r(7392),f=r(35),v=r(6600),j=r(5316),b=r(5795),w=r(3193),M=r(9190),C=r(2221),y=r(2143),k=r(9347),S=r(8587),N=r(8168),E=r(8610),O=r(8092),L=r(9303),P=r(1782),R=r(6114);const T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:n=null,disableWindowBlurListener:r=!1,onClose:a,open:o,resumeHideDuration:s}=e,i=(0,L.A)();t.useEffect(()=>{if(o)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==a||a(e,"escapeKeyDown")}},[o,a]);const l=(0,P.A)((e,n)=>{null==a||a(e,n)}),c=(0,P.A)(e=>{a&&null!=e&&i.start(e,()=>{l(null,"timeout")})});t.useEffect(()=>(o&&c(n),i.clear),[o,n,c,i]);const u=i.clear,m=t.useCallback(()=>{null!=n&&c(null!=s?s:.5*n)},[n,s,c]),d=e=>n=>{const r=e.onFocus;null==r||r(n),u()},g=e=>n=>{const r=e.onMouseEnter;null==r||r(n),u()},h=e=>n=>{const r=e.onMouseLeave;null==r||r(n),m()};return t.useEffect(()=>{if(!r&&o)return window.addEventListener("focus",m),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",u)}},[r,o,m,u]),{getRootProps:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(0,N.A)({},(0,R.A)(e),(0,R.A)(n));return(0,N.A)({role:"presentation"},n,r,{onBlur:(a=r,e=>{const n=a.onBlur;null==n||n(e),m()}),onFocus:d(r),onMouseEnter:g(r),onMouseLeave:h(r)});var a},onClickAway:e=>{null==a||a(e,"clickaway")}}};var z=r(36),D=r(4535),W=r(6240),F=r(8206),U=r(6803),B=r(6328),H=r(8387),q=r(7266),I=r(2532),_=r(2372);function K(e){return(0,_.Ay)("MuiSnackbarContent",e)}(0,I.A)("MuiSnackbarContent",["root","message","action"]);var V=r(579);const $=["action","className","message","role"],G=(0,D.Ay)(c.A,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,n)=>n.root})(e=>{let{theme:n}=e;const r="light"===n.palette.mode?.8:.98,a=(0,q.tL)(n.palette.background.default,r);return(0,N.A)({},n.typography.body2,{color:n.vars?n.vars.palette.SnackbarContent.color:n.palette.getContrastText(a),backgroundColor:n.vars?n.vars.palette.SnackbarContent.bg:a,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,flexGrow:1,[n.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),X=(0,D.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,n)=>n.message})({padding:"8px 0"}),J=(0,D.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,n)=>n.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Q=t.forwardRef(function(e,n){const r=(0,F.b)({props:e,name:"MuiSnackbarContent"}),{action:a,className:t,message:o,role:s="alert"}=r,i=(0,S.A)(r,$),l=r,c=(e=>{const{classes:n}=e;return(0,E.A)({root:["root"],action:["action"],message:["message"]},K,n)})(l);return(0,V.jsxs)(G,(0,N.A)({role:s,square:!0,elevation:6,className:(0,H.A)(c.root,t),ownerState:l,ref:n},i,{children:[(0,V.jsx)(X,{className:c.message,ownerState:l,children:o}),a?(0,V.jsx)(J,{className:c.action,ownerState:l,children:a}):null]}))});function Y(e){return(0,_.Ay)("MuiSnackbar",e)}(0,I.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Z=["onEnter","onExited"],ee=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],ne=(0,D.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n["anchorOrigin".concat((0,U.A)(r.anchorOrigin.vertical)).concat((0,U.A)(r.anchorOrigin.horizontal))]]}})(e=>{let{theme:n,ownerState:r}=e;return(0,N.A)({zIndex:(n.vars||n).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===r.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===r.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===r.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[n.breakpoints.up("sm")]:(0,N.A)({},"top"===r.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===r.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===r.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===r.anchorOrigin.horizontal&&{right:24,left:"auto"})})}),re=t.forwardRef(function(e,n){const r=(0,F.b)({props:e,name:"MuiSnackbar"}),a=(0,W.A)(),o={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:s,anchorOrigin:{vertical:i,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:m,ClickAwayListenerProps:d,ContentProps:g,disableWindowBlurListener:h=!1,message:A,open:p,TransitionComponent:x=B.A,transitionDuration:f=o,TransitionProps:{onEnter:v,onExited:j}={}}=r,b=(0,S.A)(r.TransitionProps,Z),w=(0,S.A)(r,ee),M=(0,N.A)({},r,{anchorOrigin:{vertical:i,horizontal:l},autoHideDuration:c,disableWindowBlurListener:h,TransitionComponent:x,transitionDuration:f}),C=(e=>{const{classes:n,anchorOrigin:r}=e,a={root:["root","anchorOrigin".concat((0,U.A)(r.vertical)).concat((0,U.A)(r.horizontal))]};return(0,E.A)(a,Y,n)})(M),{getRootProps:y,onClickAway:k}=T((0,N.A)({},M)),[L,P]=t.useState(!0),R=(0,O.A)({elementType:ne,getSlotProps:y,externalForwardedProps:w,ownerState:M,additionalProps:{ref:n},className:[C.root,m]});return!p&&L?null:(0,V.jsx)(z.x,(0,N.A)({onClickAway:k},d,{children:(0,V.jsx)(ne,(0,N.A)({},R,{children:(0,V.jsx)(x,(0,N.A)({appear:!0,in:p,timeout:f,direction:"top"===i?"down":"up",onEnter:(e,n)=>{P(!1),v&&v(e,n)},onExited:e=>{P(!0),j&&j(e)}},b,{children:u||(0,V.jsx)(Q,(0,N.A)({message:A,action:s},g))}))}))}))});var ae=r(7254),te=r(141),oe=r(3560),se=r(1007),ie=r(9662);const le=(0,ie.A)((0,V.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),ce=(0,ie.A)((0,V.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var ue=r(3768),me=r(4117),de=r(6305),ge=r(4779);const he=()=>{const{t:e}=(0,me.Bd)(),[n,r]=(0,t.useState)([]),[S,N]=(0,t.useState)(!0),[E,O]=(0,t.useState)(!1),[L,P]=(0,t.useState)(null),[R,T]=(0,t.useState)({open:!1,message:"",severity:"success"}),[z,D]=(0,t.useState)({}),[W,F]=(0,t.useState)({username:"",email:"",password:"",firstName:"",lastName:"",mobile:"",role:ge.iK.STAFF}),[U,B]=(0,t.useState)(!1),H=(0,t.useCallback)(async()=>{try{N(!0);const e=await de.Eo.getAllUsers();r(e.data.users)}catch(e){console.error("Error fetching users:",e),q("Error fetching users","error")}finally{N(!1)}},[]);(0,t.useEffect)(()=>{H()},[H]);const q=function(e){T({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})},I=()=>{T((0,a.A)((0,a.A)({},R),{},{open:!1}))},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(P(e),F({username:e.username,email:e.email,password:"",firstName:e.firstName,lastName:e.lastName,mobile:e.mobile,role:e.role})):(P(null),F({username:"",email:"",password:"",firstName:"",lastName:"",mobile:"",role:ge.iK.STAFF})),O(!0)},K=()=>{O(!1),P(null),F({username:"",email:"",password:"",firstName:"",lastName:"",mobile:"",role:ge.iK.STAFF})},$=async n=>{if(n.preventDefault(),(()=>{const n={};return W.username||(n.username=e("validation.usernameRequired")),W.firstName||(n.firstName=e("validation.firstNameRequired")),W.mobile?/^\d{10}$/.test(W.mobile)||(n.mobile=e("validation.mobileFormat")):n.mobile=e("validation.mobileRequired"),W.email&&!/\S+@\S+\.\S+/.test(W.email)&&(n.email=e("validation.emailFormat")),L||W.password||(n.password=e("validation.passwordRequired")),D(n),0===Object.keys(n).length})())try{if(L){const n=(0,a.A)({},W);delete n.password,await de.Eo.updateUser(L._id,n),q(e("userManagement.userUpdated"))}else await de.Eo.createUser(W),q(e("userManagement.userCreated"));K(),H()}catch(o){var r,t;console.error("Error saving user:",o),q((null===(r=o.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||e("userManagement.errorSavingUser"),"error")}};return S?(0,V.jsx)(o.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,V.jsx)(s.A,{children:e("common.loading")})}):(0,V.jsxs)(o.A,{sx:{p:3},children:[(0,V.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,V.jsx)(s.A,{variant:"h4",component:"h1",children:e("userManagement.title")}),(0,V.jsx)(i.A,{variant:"contained",startIcon:(0,V.jsx)(te.A,{}),onClick:()=>_(),children:e("userManagement.addUser")})]}),(0,V.jsx)(l.A,{component:c.A,children:(0,V.jsxs)(u.A,{children:[(0,V.jsx)(m.A,{children:(0,V.jsxs)(d.A,{children:[(0,V.jsx)(g.A,{children:e("userManagement.table.name")}),(0,V.jsx)(g.A,{children:e("userManagement.table.username")}),(0,V.jsx)(g.A,{children:e("userManagement.table.email")}),(0,V.jsx)(g.A,{children:e("userManagement.table.mobile")}),(0,V.jsx)(g.A,{children:e("userManagement.table.role")}),(0,V.jsx)(g.A,{children:e("userManagement.table.status")}),(0,V.jsx)(g.A,{children:e("userManagement.table.actions")})]})}),(0,V.jsx)(h.A,{children:n.map(n=>(0,V.jsxs)(d.A,{children:[(0,V.jsxs)(g.A,{children:[n.firstName," ",n.lastName]}),(0,V.jsx)(g.A,{children:n.username}),(0,V.jsx)(g.A,{children:n.email}),(0,V.jsx)(g.A,{children:n.mobile}),(0,V.jsx)(g.A,{children:(0,V.jsx)(A.A,{label:ge.$2[n.role],color:ge.s5[n.role],size:"small"})}),(0,V.jsx)(g.A,{children:(0,V.jsx)(A.A,{label:n.isActive?e("userManagement.status.active"):e("userManagement.status.inactive"),color:n.isActive?"success":"default",size:"small"})}),(0,V.jsxs)(g.A,{children:[(0,V.jsx)(p.A,{title:e("userManagement.actions.edit"),children:(0,V.jsx)(x.A,{onClick:()=>_(n),children:(0,V.jsx)(oe.A,{})})}),(0,V.jsx)(p.A,{title:e("userManagement.actions.changePassword"),children:(0,V.jsx)(x.A,{onClick:()=>(async n=>{const r=prompt(e("userManagement.enterNewPassword"));if(r)try{await de.Eo.changeUserPassword(n,{newPassword:r}),q(e("userManagement.passwordChanged"))}catch(a){console.error("Error changing password:",a),q(e("userManagement.errorChangingPassword"),"error")}})(n._id),children:(0,V.jsx)(se.A,{})})}),(0,V.jsx)(p.A,{title:n.isActive?e("userManagement.actions.deactivate"):e("userManagement.actions.activate"),children:(0,V.jsx)(x.A,{onClick:()=>(async n=>{try{await de.Eo.toggleUserStatus(n),q(e("userManagement.statusUpdated")),H()}catch(r){console.error("Error toggling user status:",r),q(e("userManagement.errorUpdatingStatus"),"error")}})(n._id),children:n.isActive?(0,V.jsx)(le,{}):(0,V.jsx)(ce,{})})}),(0,V.jsx)(p.A,{title:e("userManagement.actions.delete"),children:(0,V.jsx)(x.A,{onClick:()=>(async n=>{if(window.confirm(e("userManagement.confirmDelete")))try{await de.Eo.deleteUser(n),q(e("userManagement.userDeleted")),H()}catch(t){var r,a;console.error("Error deleting user:",t),q((null===(r=t.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||e("userManagement.errorDeletingUser"),"error")}})(n._id),children:(0,V.jsx)(ue.A,{})})})]})]},n._id))})]})}),(0,V.jsxs)(f.A,{open:E,onClose:K,maxWidth:"sm",fullWidth:!0,children:[(0,V.jsx)(v.A,{children:e(L?"userManagement.dialog.editTitle":"userManagement.dialog.addTitle")}),(0,V.jsx)(j.A,{children:(0,V.jsxs)(o.A,{component:"form",onSubmit:$,sx:{mt:1},children:[(0,V.jsx)(b.A,{margin:"normal",required:!0,fullWidth:!0,label:e("userManagement.form.username"),name:"username",value:W.username,onChange:e=>F((0,a.A)((0,a.A)({},W),{},{username:e.target.value}))}),(0,V.jsx)(b.A,{margin:"normal",fullWidth:!0,label:e("userManagement.form.email"),name:"email",type:"email",value:W.email,onChange:e=>F((0,a.A)((0,a.A)({},W),{},{email:e.target.value})),error:!!z.email,helperText:z.email}),!L&&(0,V.jsx)(b.A,{margin:"normal",required:!0,fullWidth:!0,label:e("userManagement.form.password"),name:"password",type:U?"text":"password",value:W.password,onChange:e=>F((0,a.A)((0,a.A)({},W),{},{password:e.target.value})),InputProps:{endAdornment:(0,V.jsx)(x.A,{onClick:()=>B(!U),edge:"end",children:U?(0,V.jsx)(le,{}):(0,V.jsx)(ce,{})})}}),(0,V.jsx)(b.A,{margin:"normal",required:!0,fullWidth:!0,label:e("userManagement.form.firstName"),name:"firstName",value:W.firstName,onChange:e=>F((0,a.A)((0,a.A)({},W),{},{firstName:e.target.value}))}),(0,V.jsx)(b.A,{margin:"normal",fullWidth:!0,label:e("userManagement.form.lastName"),name:"lastName",value:W.lastName,onChange:e=>F((0,a.A)((0,a.A)({},W),{},{lastName:e.target.value})),error:!!z.lastName,helperText:z.lastName}),(0,V.jsx)(b.A,{margin:"normal",required:!0,fullWidth:!0,label:e("userManagement.form.mobile"),name:"mobile",value:W.mobile,onChange:e=>F((0,a.A)((0,a.A)({},W),{},{mobile:e.target.value})),error:!!z.mobile,helperText:z.mobile}),(0,V.jsxs)(w.A,{fullWidth:!0,margin:"normal",children:[(0,V.jsx)(M.A,{children:e("userManagement.form.role")}),(0,V.jsx)(C.A,{value:W.role,label:e("userManagement.form.role"),onChange:e=>F((0,a.A)((0,a.A)({},W),{},{role:e.target.value})),children:Object.entries(ge.iK).map(e=>{let[n,r]=e;return(0,V.jsx)(y.A,{value:r,children:ge.$2[r]},r)})})]})]})}),(0,V.jsxs)(k.A,{children:[(0,V.jsx)(i.A,{onClick:K,children:e("common.cancel")}),(0,V.jsx)(i.A,{onClick:$,variant:"contained",children:e(L?"common.update":"common.create")})]})]}),(0,V.jsx)(re,{open:R.open,autoHideDuration:6e3,onClose:I,children:(0,V.jsx)(ae.A,{onClose:I,severity:R.severity,children:R.message})})]})}}}]);
//# sourceMappingURL=970.0ee6be85.chunk.js.map