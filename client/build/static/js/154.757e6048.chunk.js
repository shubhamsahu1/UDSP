"use strict";(self.webpackChunkapplication_init_client=self.webpackChunkapplication_init_client||[]).push([[154],{909:(e,t,a)=>{a.d(t,{A:()=>r,b:()=>n});var s=a(2532),i=a(2372);function n(e){return(0,i.Ay)("MuiListItemText",e)}const r=(0,s.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},1424:(e,t,a)=>{a.d(t,{A:()=>r,f:()=>n});var s=a(2532),i=a(2372);function n(e){return(0,i.Ay)("MuiListItemIcon",e)}const r=(0,s.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},2143:(e,t,a)=>{a.d(t,{A:()=>w});var s=a(8587),i=a(8168),n=a(5043),r=a(8387),o=a(8610),c=a(7266),l=a(4535),d=a(1475),p=a(8206),u=a(1347),m=a(6236),v=a(5013),h=a(5849),y=a(5658),x=a(1424),b=a(909),A=a(2532),g=a(2372);function f(e){return(0,g.Ay)("MuiMenuItem",e)}const j=(0,A.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var S=a(579);const C=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],I=(0,l.Ay)(m.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:a}=e;return(0,i.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(y.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(y.A.inset)]:{marginLeft:52},["& .".concat(b.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(b.A.inset)]:{paddingLeft:36},["& .".concat(x.A.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,i.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(x.A.root," svg")]:{fontSize:"1.25rem"}}))}),w=n.forwardRef(function(e,t){const a=(0,p.b)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:l="li",dense:d=!1,divider:m=!1,disableGutters:y=!1,focusVisibleClassName:x,role:b="menuitem",tabIndex:A,className:g}=a,j=(0,s.A)(a,C),w=n.useContext(u.A),k=n.useMemo(()=>({dense:d||w.dense||!1,disableGutters:y}),[w.dense,d,y]),T=n.useRef(null);(0,v.A)(()=>{c&&T.current&&T.current.focus()},[c]);const M=(0,i.A)({},a,{dense:k.dense,divider:m,disableGutters:y}),N=(e=>{const{disabled:t,dense:a,divider:s,disableGutters:n,selected:r,classes:c}=e,l={root:["root",a&&"dense",t&&"disabled",!n&&"gutters",s&&"divider",r&&"selected"]},d=(0,o.A)(l,f,c);return(0,i.A)({},c,d)})(a),O=(0,h.A)(T,t);let P;return a.disabled||(P=void 0!==A?A:-1),(0,S.jsx)(u.A.Provider,{value:k,children:(0,S.jsx)(I,(0,i.A)({ref:O,role:b,tabIndex:P,component:l,focusVisibleClassName:(0,r.A)(N.focusVisible,x),className:(0,r.A)(N.root,g)},j,{ownerState:M,classes:N}))})})},5154:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(5043),i=a(6446),n=a(5865),r=a(8903),o=a(3336),c=a(7254),l=a(5795),d=a(3193),p=a(9190),u=a(2221),m=a(2143),v=a(1906),h=a(1637),y=a(2110),x=a(9662),b=a(579);const A=(0,x.A)((0,b.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),g=(0,x.A)((0,b.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var f=a(4117),j=a(5016),S=a(6305);const C=async()=>{try{return(await S.Ay.get("/testdata/labtests")).data}catch(t){var e;throw(null===(e=t.response)||void 0===e?void 0:e.data)||{success:!1,message:"Network error"}}},I=async e=>{try{return(await S.Ay.get("/testdata/my/".concat(e))).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{success:!1,message:"Network error"}}},w=async e=>{try{return(await S.Ay.post("/testdata",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{success:!1,message:"Network error"}}},k=()=>{const{t:e}=(0,f.Bd)(),{user:t}=(0,j.A)(),[a,x]=(0,s.useState)((new Date).toISOString().split("T")[0]),[S,k]=(0,s.useState)([]),[T,M]=(0,s.useState)(""),[N,O]=(0,s.useState)(""),[P,V]=(0,s.useState)(""),[F,L]=(0,s.useState)([]),[z,D]=(0,s.useState)(!1),[H,_]=(0,s.useState)(!1),[B,G]=(0,s.useState)(""),[W,R]=(0,s.useState)("");(0,s.useEffect)(()=>{q()},[]),(0,s.useEffect)(()=>{a&&E()},[a]);const q=async()=>{try{const e=await C();e.success?k(e.data):G("Failed to fetch lab tests")}catch(e){G("Failed to fetch lab tests"),console.error("Fetch lab tests error:",e)}},E=async()=>{try{D(!0);const e=await I(a);if(e.success){L(e.data);const t=e.data.find(e=>e.labTestId._id===T);t?(O(t.sampleTaken.toString()),V(t.samplePositive.toString())):T&&(O(""),V(""))}}catch(e){console.error("Fetch existing data error:",e)}finally{D(!1)}};return(0,b.jsxs)(i.A,{children:[(0,b.jsxs)(n.A,{variant:"h4",gutterBottom:!0,children:[e("dashboard.welcome"),", ",null===t||void 0===t?void 0:t.firstName,"!"]}),(0,b.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,b.jsx)(r.Ay,{item:!0,xs:12,md:8,children:(0,b.jsxs)(o.A,{sx:{p:3},children:[(0,b.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,b.jsx)(A,{sx:{mr:2,color:"primary.main"}}),(0,b.jsx)(n.A,{variant:"h6",children:"Daily Test Data Entry"})]}),B&&(0,b.jsx)(c.A,{severity:"error",sx:{mb:2},onClose:()=>G(""),children:B}),W&&(0,b.jsx)(c.A,{severity:"success",sx:{mb:2},onClose:()=>R(""),children:W}),(0,b.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),T&&N&&P)if(parseInt(P)>parseInt(N))G("Number of positive samples cannot exceed number of samples taken");else try{_(!0),G("");const e={date:a,labTestId:T,sampleTaken:parseInt(N),samplePositive:parseInt(P)},t=await w(e);t.success?(R("Test data saved successfully"),E()):G(t.message||"Failed to save test data")}catch(t){G("Failed to save test data"),console.error("Save test data error:",t)}finally{_(!1)}else G("Please fill in all required fields")},children:(0,b.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,b.jsx)(r.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(l.A,{fullWidth:!0,label:"Date",type:"date",value:a,onChange:e=>x(e.target.value),InputLabelProps:{shrink:!0},required:!0})}),(0,b.jsx)(r.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsxs)(d.A,{fullWidth:!0,required:!0,children:[(0,b.jsx)(p.A,{children:"Lab Test"}),(0,b.jsx)(u.A,{value:T,onChange:e=>{const t=e.target.value;M(t);const a=F.find(e=>e.labTestId._id===t);a?(O(a.sampleTaken.toString()),V(a.samplePositive.toString())):(O(""),V(""))},label:"Lab Test",children:S.map(e=>(0,b.jsx)(m.A,{value:e._id,children:e.name},e._id))})]})}),(0,b.jsx)(r.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(l.A,{fullWidth:!0,label:"Number of Samples Taken",type:"number",value:N,onChange:e=>O(e.target.value),inputProps:{min:0},required:!0})}),(0,b.jsx)(r.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(l.A,{fullWidth:!0,label:"Number of Positive Samples",type:"number",value:P,onChange:e=>V(e.target.value),inputProps:{min:0,max:N||void 0},required:!0})}),(0,b.jsx)(r.Ay,{item:!0,xs:12,children:(0,b.jsx)(v.A,{type:"submit",variant:"contained",startIcon:H?(0,b.jsx)(h.A,{size:20}):(0,b.jsx)(g,{}),disabled:H||!T||!N||!P,size:"large",children:H?"Saving...":"Update Data"})})]})})]})}),(0,b.jsx)(r.Ay,{item:!0,xs:12,md:4,children:(0,b.jsxs)(o.A,{sx:{p:3},children:[(0,b.jsx)(n.A,{variant:"h6",gutterBottom:!0,children:"Today's Entries"}),z?(0,b.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,b.jsx)(h.A,{size:24})}):0===F.length?(0,b.jsx)(n.A,{variant:"body2",color:"text.secondary",children:"No entries for this date."}):(0,b.jsx)(i.A,{children:F.map(e=>(0,b.jsxs)(y.A,{sx:{mb:1,p:2},variant:"outlined",children:[(0,b.jsx)(n.A,{variant:"subtitle2",fontWeight:"medium",children:e.labTestId.name}),(0,b.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:["Samples Taken: ",e.sampleTaken]}),(0,b.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:["Positive: ",e.samplePositive]}),(0,b.jsx)(n.A,{variant:"caption",color:"primary",children:e.sampleTaken>0?"".concat((e.samplePositive/e.sampleTaken*100).toFixed(1),"% positive"):"0% positive"})]},e._id))})]})})]})]})}},5658:(e,t,a)=>{a.d(t,{A:()=>r,K:()=>n});var s=a(2532),i=a(2372);function n(e){return(0,i.Ay)("MuiDivider",e)}const r=(0,s.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])}}]);
//# sourceMappingURL=154.757e6048.chunk.js.map